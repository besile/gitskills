function Tx_WriteSingleLogin() { document.location.href.indexOf(".tiexue.net") > -1 || $.ajax({ url: "http://lc.tiexue.net/p.tx", dataType: "jsonp", async: !1, cache: !1, jsonp: "c", success: function (a) { if (TX.BaseCookie.SetCookie(TX.BaseCookie.SingleCookieName, a[0].U, 31536e3), document.location.href.indexOf(".junshishu.com") > -1) try { ResetUserLoginStatus() } catch (b) { } if (document.location.href.indexOf(".laobing.cn") > -1) try { ResetUserLoginStatus() } catch (b) { } if (document.location.href.indexOf(".pengfu.com") > -1) try { PF_InitLoginBar(!0) } catch (b) { } if (document.location.href.indexOf(".junph.com") > -1) try { loginbar() } catch (b) { } } }) } function userDefinedAd(a, b, c, d, e, f) { var g, h; 1 == b ? (g = "http://" + a + "/domain-policy/" + c + ".htm?h=" + new Date().getHours(), h = $("#" + d), h.length > 0 && h.html('<iframe src="' + g + '" width="' + e + 'px" height="' + f + 'px" scrolling="no" frameborder="0"></iframe>')) : $("body").append('<script type="text/javascript" src="http://' + a + "/domain-policy/" + c + '.js?h=' + new Date().getHours() + '"></script>') } !function (a) { var CDomain, FriendCacheData, GroupCacheData; a.TX = { TabSpace: function (a) { function e() { d = $("#" + a.id), d.size() ? (clearTimeout(c), c = null, f(d)) : c = setTimeout(e, 500) } function f(b) { function h(a, b) { f = setTimeout(function () { a(b) }, 100) } function i(b) { if (c.eq(b).addClass(a.tabStyle).siblings().removeClass(a.tabStyle), 2 == a.effect) d.eq(b).is(":visible") || (d.hide(), d.eq(b).fadeIn(a.time)); else { if (1 != a.effect) return alert(a.effect + "is none"), void 0; d.eq(b).css("display", "block").siblings().css("display", "none") } a.loadImg && d.eq(b).find("img").trigger("appear") } function j(b) { c.eq(b).removeClass(a.tabStyle), 2 == a.effect ? d.eq(b).hide() : 1 == a.effect && d.eq(b).css("display", "none") } var g, c = a.hasOwnProperty("notClassName") ? b.find(".tabTit").eq(0).children(":not(." + a.notClassName + ")") : b.find(".tabTit").eq(0).children(), d = b.find(".tabLayer").eq(0).children(), e = null, f = null; return c.size() && d.size() ? ("mouseover" == a.eventStyle ? (g = b.find(".tabLayer").children(":first"), g.is(":visible") && g.siblings().css("display", "none"), "none" == a.isBlock ? (c.hover(function () { clearTimeout(f), e = c.index(this), i(e) }, function () { h(j, e) }), d.hover(function () { clearTimeout(f) }, function () { h(j, e) })) : a.delay ? c.mouseover(function () { if (e = c.index(this), h(i, e), a.backFn) { var b = a.backFn; b(e) } }).mouseout(function () { clearTimeout(f) }) : c.mouseover(function () { if (e = c.index(this), i(e), a.backFn) { var b = a.backFn; b(e) } })) : c[a.eventStyle](function () { e = c.index(this), i(e) }), void 0) : (alert(c + "and" + d + "undefined"), void 0) } var c = null, d = null; "string" == typeof a.id ? e() : f($(a.id)) }, TargetLayer: function (a) { function b(b) { if (b) switch (a.effect) { case 1: f.css("display", "block"); break; case 2: f.fadeIn(); break; case 3: f.slideDown("fast"); break; default: alert("没有" + a.effect + "这个效果") } else { switch (a.effect) { case 1: f.css("display", "none"); break; case 2: f.fadeOut(); break; case 3: f.slideUp("fast") } a.tabStyle && e.removeClass(a.tabStyle) } } function c() { a.tabStyle && e.addClass(a.tabStyle), offset = e.position(), 0 == a.top && 0 == a.left ? f.css({ marginTop: parseInt(f.css("margin-top")), marginLeft: parseInt(f.css("margin-left")) }) : (a.top = void 0 == a.top ? 0 : a.top, a.left = void 0 == a.left ? 0 : a.left, f.css({ top: offset.top + parseInt(a.top), left: offset.left + parseInt(a.left) })), b(1) } function d() { g = setTimeout(function () { b(0) }, 300) } var e = "string" == typeof a.cur_id ? $("#" + a.cur_id) : $(a.cur_id), f = "string" == typeof a.target_id ? $("#" + a.target_id) : a.target_id, g = null; if ("object" == typeof a.cur_id) c(), e.mouseout(d); else { if ("mouseover" != a.eventStyle) return a.eventStyle + "not this", void 0; e.mouseover(function () { c() }).mouseout(function () { d() }) } f.hover(function () { return g && (clearTimeout(g), g = null), b(1), !1 }, function () { d() }) }, PopLayer: { TempLate: function () { return "<div class='pub_Pop_Style' id='pubLayer_Msg'><div class='pop_bar'><p class='ui_layerTit float_L'>提示</p><p class='closeLayer float_R textHide'>关闭</p></div></div>" }, ShowLayer: function (a) { var b, c, d; return a.hasOwnProperty("sIframe") && a.hasOwnProperty("sHtml") ? (alert("sIframe or sHtml only"), void 0) : a.hasOwnProperty("sIframe") || a.hasOwnProperty("sHtml") ? (a.hasOwnProperty("firstFn") && this.fnRun(a.firstFn), $("body").append(TX.PopLayer.TempLate() + "<div id='zheZhaoLayer'></div>"), b = $("#zheZhaoLayer"), c = $("#pubLayer_Msg"), a.Title ? c.find(".ui_layerTit").html(a.Title) : $(".pop_bar").remove(), d = 0 == $(document).scrollTop() ? $(document).height() : $("body").height(), b.css({ height: d, opacity: a.bgAlpha }), this.LayerMiddle(a.LayerWidth, a.LayerHeight, a.Position), $(window).resize(function () { TX.PopLayer.LayerMiddle(a.LayerWidth, a.LayerHeight, a.Position) }), 0 == a.bgAlpha ? c.fadeIn(200) : b.fadeIn(100, function () { function d() { var a = c.find(".pop_bar"); a.css({ background: f ? "#FFF" : "#eaeaea" }), f = f ? 0 : 1, g++, g > 3 && (clearInterval(e), e = null, g = 0) } var e, f, g; $.browser.msie && $.browser.version < 7 ? c.fadeIn() : (c.css({ display: "block", opacity: 0 }), c.animate({ top: ($(window).height() - parseInt(a.LayerHeight)) / 2 - 50 > 0 ? ($(window).height() - parseInt(a.LayerHeight)) / 2 - 50 : 10, opacity: 1 }, "fast"), c.find(".pop_bar").mousedown(function (b) { return TX.PopLayer.popMove(b, c, a.LayerWidth, a.LayerHeight, !0), !1 })), e = null, b.click(function () { clearInterval(e), e = setInterval(d, 50) }), f = 1, g = 0 }), c.find(".closeLayer").click(function () { a.hasOwnProperty("backFn") ? TX.PopLayer.CloseLayer("pubLayer_Msg", a.backFn) : TX.PopLayer.CloseLayer("pubLayer_Msg", !1) }), a.hasOwnProperty("sIframe") ? c.append("<div class='onloadBeforMsg'>正在读取中...</div><iframe src='" + a.sIframe + "' frameborder='0' scrolling='no' width='100%' height='100%' onload=\"$(this).prev('.onloadBeforMsg').remove().end().fadeIn('slow')\"></iframe>") : a.hasOwnProperty("sHtml") && c.append(a.sHtml), void 0) : (alert("please whirte src or html"), void 0) }, LayerMiddle: function (a, b, c) { function e() { d.css({ width: a, height: b, position: "absolute", margin: 0, left: Math.floor(($(window).width() - parseInt(a)) / 2), top: Math.floor(($(window).height() - parseInt(b)) / 2 - 20 + $(window).scrollTop()) }) } var d = $("#pubLayer_Msg"); $.browser.msie && $.browser.version < 7 ? (e(), $(window).scroll(function () { e() })) : d.css({ width: a, height: b, position: c ? c : "fixed", margin: 0, left: Math.floor(($(window).width() - parseInt(a)) / 2), top: Math.floor(($(window).height() - parseInt(b)) / 2 - 70) > 0 ? Math.floor(($(window).height() - parseInt(b)) / 2 - 70) : 10 }) }, popMove: function (a, b, c, d, e) { function f(a) { a || (a = window.event); var f = a.clientX, g = a.clientY, j = k + (f - h), m = l + (g - i) - $(document).scrollTop(), n = $(window).width() - c - 2, o = $(window).height() - d - 2; return e ? (j > n ? b.css("left", n) : m > o ? b.css("top", o > 0 ? o : 10) : 0 > j ? b.css("left", 0) : 0 > m ? b.css("top", 0) : (b.css("left", j), b.css("top", m)), !1) : void 0 } function g() { e = !1, $(document).unbind("mousemove mouseup") } var c = parseInt(c), d = parseInt(d), a = a || window.event, e = e, h = a.clientX, i = a.clientY, j = b.offset(), k = j.left, l = j.top; $(document).bind("mousemove", f), $(document).bind("mouseup", g) }, fnRun: function (fn) { try { "function" != typeof fn ? eval(fn) : fn() } catch (e) { } }, CloseLayer: function (a, b) { function c() { 0 != $("#zheZhaoLayer").size() ? ($("#zheZhaoLayer").fadeOut(300, function () { b && TX.PopLayer.fnRun(b) }), $("#zheZhaoLayer").remove()) : b && TX.PopLayer.fnRun(b), d.remove() } var d = void 0 == a ? $("#pubLayer_Msg") : $("#" + a); $.browser.msie && $.browser.version < 7 ? d.fadeOut(300, c) : d.animate({ top: d.offset().top - $(document).scrollTop() - 25, opacity: 0 }, 200, c) } }, GameLink: function () { return '<ul class="gameList" id="ui_game_layer"><li><a href="http://rx.game.tiexue.net/"><span>热血三国2</span></a></li><li><a href="http://zl.game.tiexue.net/"><span>斩龙传奇</span></a></li><li><a href="http://fy.game.tiexue.net/"><span>风云无双</span></a></li><li><a href="http://dn.game.tiexue.net/"><span>大闹天宫</span></a></li><li><a href="http://ns.game.tiexue.net/"><span>女神联盟</span></a></li><li><a href="http://gc.game.tiexue.net/"><span>攻城掠地</span></a></li><li><a href="http://dj.game.tiexue.net/"><span>大将军</span></a></li><li><a href="http://dx.game.tiexue.net/"><span>大侠传</span></a></li><li><a href="http://mr.game.tiexue.net/"><span>秦美人</span></a></li><li><a href="http://as.game.tiexue.net/"><span>傲视天地</span></a></li><li><a href="http://zzsf.game.tiexue.net/"><span>征战四方</span></a></li><li><a href="http://lj.game.tiexue.net/"><span>龙将</span></a></li></ul>' }, AddFavorite: function (a, b) { try { window.external.addFavorite(a, b) } catch (c) { try { window.sidebar.addPanel(b, a, "") } catch (c) { alert("加入收藏失败，请使用Ctrl+D进行添加！") } } }, HomePage: function () { if (document.all) document.body.style.behavior = "url(#default#homepage)", document.body.setHomePage(window.location.href); else if (window.sidebar) { if (window.netscape) try { netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect") } catch (a) { alert("该操作被浏览器拒绝，如果想启用该功能，请在地址栏内输入 about:config,然后将项 signed.applets.codebase_principal_support 值该为true") } var b = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch); b.setCharPref("browser.startup.homepage", window.location.href) } else alert("抱歉，您的浏览器不支持自动设置首页, 请使用浏览器菜单手动设置!") }, BaiduAd_Show: function (a, b, c, d, e) { var f = $("#" + a); f.length > 0 && f.html('<iframe src="' + b + "?id=" + c + '" width="' + d + 'px" height="' + e + 'px" scrolling="no" frameborder="0" style="margin:0;background-color:transparent;" allowTransparency="true"></iframe>') }, BackTop: function (a) { function e(a) { var b = $("#" + c.Id), d = $(window).width(); b.length > 0 && ($.browser.msie && $.browser.version < 7 ? b.css({ position: "absolute", top: $(window).height() + $(document).scrollTop() - b.height() - c.Bottom, left: d / 2 + a / 2 + 10 }) : b.css({ position: "fixed", bottom: c.Bottom, left: d / 2 + a / 2 + 10 }), c.Show || (0 == $(document).scrollTop() ? b.fadeOut() : b.fadeIn()), 0 == $(document).scrollTop() ? b.children(".hide").fadeOut() : b.children(".hide").fadeIn()) } var b = { Id: "backTop", TempLate: '<a href="javascript:void(0)" class="top">向上</a>', ConWidth: 960, Show: !1, Bottom: 100 }, c = $.extend(b, a), d = b.Show ? "block" : "none"; setTimeout(function () { $("#" + c.Id).remove(), $("body").append("<div id=" + c.Id + ' style="display:' + d + '">' + c.TempLate + "</div>"), e(c.ConWidth), $("#" + c.Id + " " + ".top").click(function () { $("html,body").animate({ scrollTop: 0 }, 150) }), $(window).bind("scroll resize load", function () { e(c.ConWidth) }) }, 1500) }, ImgLazyLoad: function (a) { function e() { b.Id.each(function () { f(this, b) || $(this).is(":visible") && $(this).trigger("appear") }) } function f(a, b) { var c = $(window).height() + $(window).scrollTop(); return c <= $(a).offset().top - b.threshold } var c, d, b = { Id: $("img"), threshold: 600, effectspeed: 0, effect: "show" }; return $.extend(b, a), c = b.Id, d = null, $(window).bind("load reset", e), $(window).scroll(function () { d && clearTimeout(d), d = setTimeout(e ? e : "", 100) }), c.each(function () { var c = this; $(c).data("t", $(c).offset().top), f(c, b) ? c.loaded = !1 : $(c).is(":visible") && ($(c).attr("src", $(c).attr("original")), c.loaded = !0), $(c).one("appear", function () { this.loaded || $("<img />").bind("load", function () { $(c).hide().attr("src", $(c).attr("original"))[b.effect](b.effectspeed), c.loaded = !0 }).attr("src", $(c).attr("original")) }) }) } }, TX.BaseCookie = { GetRootDomain: function (a) { var b = a.split("."); return b.length > 2 ? b[b.length - 2] + "." + b[b.length - 1] : a }, ClearCookie: function (a) { this.SetCookie(a, " ", -3600) }, SetCookie: function (a, b, c) { var e, f, g, d = new Date; d.setTime(d.getTime() + 1e3 * c), e = this.GetRootDomain(document.domain), f = ";expires=" + d.toGMTString(), g = ";path=/", e = ";domain=" + this.GetRootDomain(document.domain), document.cookie = a + "=" + encodeURIComponent(b) + f + g + e }, GetCookie: function (a) { var f, g, b = null, c = document.cookie + ";", d = a + "=", e = c.indexOf(d); if (-1 != e) { f = new RegExp("(;|(\\b)+)" + a + "=.+?(?=;)"), e = f.exec(c)[0], g = /=(.+)/gi, b = g.exec(e)[1]; try { b = decodeURI(b) } catch (a) { b = unescape(b) } } return b }, BBS_GetDomain: function (a) { return this.GetRootDomain(a) }, BBS_SetCookie: function (a, b, c, d, e) { var f = null == c ? "" : ";expires=" + c.toGMTString(), g = null == d ? "" : ";path=" + d, h = null == e ? "" : ";domain=" + e; document.cookie = a + "=" + escape(b) + f + g + h }, BBS_GetCookie: function (a) { return this.GetCookie(a) }, BBS_GetParm: function (a, b) { var g, c = null, d = b + "&", e = a + "=", f = d.indexOf(e); return -1 != f && (f += e.length, g = d.indexOf("&", f), c = d.substring(f, g)), c } }, document.location.href.indexOf(".qichelian.com") <= -1 && document.location.href.indexOf(".junshishu.com") <= -1 && document.location.href.indexOf(".pengfu.com") <= -1 && document.location.href.indexOf(".junph.com") <= -1 && document.location.href.indexOf(".tiexue.net") <= -1 ? (TX.BaseCookie.BBS_SetParm = function (a, b, c) { var h, i, j, d = "", e = c + "&", f = b + "=", g = e.indexOf(f); return -1 != g ? (g += f.length, h = e.indexOf("&", g), i = e.substring(0, g), j = e.substring(h, e.length - 1), d = i + a + j) : d = "" == c ? c + b + "=" + a : c + "&" + b + "=" + a, d }, TX.BaseCookie.BBS_CurrentUserName = function () { var b, a = this.BBS_GetCookie(this.BBS_ConfigCookieName); return this.BBS_FormsIsEffective() && null != a ? (b = decodeURI(this.BBS_GetParm("UserName", a)), null != b ? b : "未登录") : "未登录" }, TX.BaseCookie.TxBBS_CurrentUserName = function () { var b, a = this.BBS_GetCookie(this.BBS_ConfigCookieName); return this.BBS_FormsIsEffective() && null != a ? (b = decodeURI(this.BBS_GetParm("UserName", a)), null != b ? b : "未登录") : "未登录" }, TX.BaseCookie.BBS_LoadConfig = function () { var a = this.BBS_GetCookie(this.BBS_ConfigCookieName); null != a && (nowPageStyle = this.BBS_GetParm("PageStyle", a), nowOpenType = this.BBS_GetParm("OpenType", a), nowPostStyle = this.BBS_GetParm("PostStyle", a)) }, TX.BaseCookie.BBS_SaveConfig = function (a, b, c) { var e, d = this.BBS_GetCookie(this.BBS_ConfigCookieName); null == d && (d = ""), d = this.BBS_SetParm(a, "PageStyle", d), d = this.BBS_SetParm(b, "OpenType", d), d = this.BBS_SetParm(c, "PostStyle", d), e = new Date, e.setTime(e.getTime() + 31536e6), this.BBS_SetCookie(this.BBS_ConfigCookieName, d, e, "/", this.BBS_GetDomain(document.domain)) }, TX.BaseCookie.BBS_CurrentUserID = function () { var b, a = this.BBS_GetCookie(this.BBS_ConfigCookieName); return this.BBS_FormsIsEffective() && null != a ? (b = this.BBS_GetParm("UserID", a), null != b ? b : 0) : 0 }, TX.BaseCookie.BBS_IsHeader = function () { var a = this.BBS_GetCookie(this.BBS_ConfigCookieName); return this.BBS_FormsIsEffective() && null != a ? "True" == this.BBS_GetParm("IsHeader", a) : !1 }, TX.BaseCookie.BBS_FormsCookieName = "TxNet2", TX.BaseCookie.BBS_FormsIsEffective = function () { var a = this.BBS_GetCookie(this.BBS_FormsCookieName) || this.BBS_GetCookie("PengFuLogin"); return null != a && "" != a ? !0 : !1 }, TX.BaseCookie.SingleCookieName = "p") : (TX.BaseCookie.BBS_SetParm = function (a, b, c) { var h, i, j, d = "", e = c + "&", f = b + "=", g = e.indexOf(f); return -1 != g ? (g += f.length, h = e.indexOf("&", g), i = e.substring(0, g), j = e.substring(h, e.length - 1), d = i + a + j) : d = "" == c ? c + b + "=" + a : c + "&" + b + "=" + a, d }, TX.BaseCookie.BBS_CurrentUserID = function () { var b, a = decodeURIComponent(this.BBS_GetCookie(this.SingleCookieName)); return null != a ? (b = this.BBS_GetParm("UserID", a), null != b ? b : 0) : 0 }, TX.BaseCookie.BBS_CurrentUserName = function () { var b, a = decodeURIComponent(this.BBS_GetCookie(this.SingleCookieName)); return null != a ? (b = decodeURI(this.BBS_GetParm("UserName", a)), null != b ? b : "未登录") : "未登录" }, TX.BaseCookie.TxBBS_CurrentUserName = function () { var b, a = decodeURIComponent(this.BBS_GetCookie(this.SingleCookieName)); return null != a ? (b = decodeURI(this.BBS_GetParm("UserName", a)), null != b ? b : "未登录") : "未登录" }, TX.BaseCookie.BBS_IsHeader = function () { var a = decodeURIComponent(this.BBS_GetCookie(this.SingleCookieName)); return null != a ? "True" == this.BBS_GetParm("IsHeader", a) : !1 }, TX.BaseCookie.BBS_LoadConfig = function () { var a = this.BBS_GetCookie(this.BBS_ConfigCookieName); null != a && (nowPageStyle = this.BBS_GetParm("PageStyle", a), nowOpenType = this.BBS_GetParm("OpenType", a), nowPostStyle = this.BBS_GetParm("PostStyle", a)) }, TX.BaseCookie.BBS_SaveConfig = function (a, b, c) { var e, d = this.BBS_GetCookie(this.BBS_ConfigCookieName); null == d && (d = ""), d = this.BBS_SetParm(a, "PageStyle", d), d = this.BBS_SetParm(b, "OpenType", d), d = this.BBS_SetParm(c, "PostStyle", d), e = new Date, e.setTime(e.getTime() + 31536e6), this.BBS_SetCookie(this.BBS_ConfigCookieName, d, e, "/", this.BBS_GetDomain(document.domain)) }, TX.BaseCookie.SingleCookieName = "p"), TX.Config = { RegPath: "http://reg.tiexue.net/js/loginbar.aspx", QuickRegister: "http://reg.tiexue.net/js/QuickRegister.aspx", BBSQuickRegister: "http://reg.tiexue.net/XmlHttp/BBSQuickRegister.aspx" }, CDomain = TX.BaseCookie.GetRootDomain(document.domain); try { document.domain = CDomain } catch (e) { } TX.getRandom = function () { return Math.round(1e5 * Math.random()) }, TX.GetJQueryHttpReq = function (a) { var b = ""; return jQuery.ajax({ async: !1, cache: !1, url: a, error: function () { b = '{result:[{status:0,message:"ajax error"}]}' }, success: function (a) { b = a } }), b }, TX.GetJQueryHttpReqAsync = function (a, b) { jQuery.ajax({ type: "get", async: !0, cache: !1, url: a, error: function () { b('{result:[{status:0,message:"ajax error"}]}') }, success: function (a) { b(a) } }) }, TX.RefreshValidCode = function (a, b) { void 0 == a && (a = $("#txtUserName")); var c = void 0 == b ? $("#ValidateCodeImg") : $("#" + b); c.attr("src", RefreshValidCode(a.val())) }, RefreshValidCode = function (a) { var b = "http://reg." + CDomain + "/Validate.aspx?UserName=" + escape(a) + "&tmp=" + TX.getRandom(); return b }, TX.WeakPasswordFlag = !1, TX.LoadScript = function (a, b, c) { var d = document.createElement("script"); d.type = "text/javascript", c && d.setAttribute("charset", c), d.readyState ? d.onreadystatechange = function () { ("loaded" == d.readyState || "complete" == d.readyState) && (d.onreadystatechange = null, b(), document.getElementsByTagName("head")[0].removeChild(this)) } : d.onload = function () { b(), document.getElementsByTagName("head")[0].removeChild(this) }, d.src = a, document.getElementsByTagName("head")[0].appendChild(d) }, TX.UserLogin = function (a, b, c, d, e, f) { TX.LoadScript("http://s.itiexue.net/??js/global/pwd-encrypt.js", function () { $.getJSON("http://sso.tiexue.net/account/jsongetkey?callback=?", function (g) { var h, i, j, k, l, m, n, o; return setMaxDigits(129), h = g, i = h.exponent, j = h.modulus, k = h.key, l = new RSAKeyPair(i, "", j), m = encryptedString(l, b), TX.WeakPasswordFlag = TX.ValidatePassword(b) || a == b ? !0 : !1, f = f ? f : 1, e = e ? e : "", d && TX.LibraryTool.StringIsNullOrEmpty(e) ? alert("请输入验证码!") : (n = "http://sso.tiexue.net/account/sync?t=" + TX.getRandom() + "&appid=" + f, o = d ? "True" : "False", 0 == $("iframe#__JSONP-LOGON-SYNC-IFRAME").length && $("body").append("<iframe src='' id='__JSONP-LOGON-SYNC-IFRAME' style='display:none'></iframe>"), $.ajax({ url: "http://sso.tiexue.net/account/jsonlogon", type: "GET", dataType: "jsonp", data: { username: a, password: 'tiexue', validityDays: c, "enable-captcha": o, captcha: e, screctpassword: m, passwordguid: k }, success: function (a) { 1 == a.success ? ($("iframe#__JSONP-LOGON-SYNC-IFRAME").load(function () { Tx_WriteSingleLogin(), Tx_LoginFun("true|0") }), $("iframe#__JSONP-LOGON-SYNC-IFRAME").attr("src", n)) : Tx_LoginFun("false|" + a.errors) } }), void 0) }) }) }, TX.UserLogout = function () { var d, a = TX.Config.RegPath + "?FunName=Logout&t=" + TX.getRandom(), b = { TxLogOutJs: a }, c = ""; for (d in b) c += "<script id='" + d + "' src='" + b[d] + "'></script>"; $("body").append(c) }, TX.RefreshValidCodeNoName = function () { var a = "http://reg." + CDomain + "/ValiImageCode.aspx?tmp=" + TX.getRandom(); return a }, FriendCacheData = null, GroupCacheData = null, TX.GetCookieFirendAndGroup = { GetMyFriendsFromServer: function (a) { var c, d, b = a ? a : 10; return TxBBS_UserID = TX.BaseCookie.BBS_CurrentUserID(), TxBBS_UserID > 0 ? (c = "agent.aspx?desturl=" + encodeURIComponent("http://i." + CDomain + "/js/InfoBarNew.aspx?FunName=GetMyFriend&num=" + b), d = "", jQuery.ajax({ type: "get", dataType: "text", async: !1, cache: !1, url: c, error: function () { }, success: function (a) { d = a } }), d) : void 0 }, ClearGroupAndFriend: function () { }, GetMyGroupsFromServer: function () { var b, c, a = TX.BaseCookie.BBS_CurrentUserID(); if (0 != a) return b = "agent.aspx?desturl=" + encodeURIComponent("http://i." + CDomain + "/js/InfoBarNew.aspx?FunName=GetMyGroup&num=10"), c = "", jQuery.ajax({ type: "get", dataType: "text", async: !1, cache: !1, url: b, error: function () { }, success: function (a) { c = a } }), c } }, TX.LibraryTool = { StringIsNullOrEmpty: function (a) { var b = !1; return ("" == a || null == a || "undefined" == a || "null" == a || "undefined" == typeof a) && (b = !0), b }, StringLength: function (a) { var b = 0; for (i = 0; i < a.length; i++) b += a.charCodeAt(i) > 255 ? 2 : 1; return b }, StringIsEmail: function (a) { return /^[_a-zA-Z0-9\-]+(\.[_a-zA-Z0-9\-]*)*@[a-zA-Z0-9\-]+([\.][a-zA-Z0-9\-]+)+$/gi.test(a) } }, TX.ShowProtectedUserAlert = function () { var a = '<div style="width:550px;font-size:14px;line-height:30px;text-align:left;"><dl style="margin:15px;text-align:left;width:520;height:210px;border:1px solid #DCDCDC;background-color:#F4F4F4;"><dd style="padding:15px">尊敬的用户：<br />&nbsp;&nbsp;&nbsp;&nbsp;您好。鉴于各大网站账号被盗事件频发，为保护您的隐私安全，我们对您的账号采取了高级保护措施，请您及时联系<strong>&nbsp;<span style="color:#F00;">客服QQ：2454163170 客服电话：010-62677319</span></strong> 敬请谅解。<p style="width:500px;margin-left:220px;"><br /><a style="background:url(http://book.itiexue.net/images/V4/btnBg.gif) no-repeat 0px -332px;width:79px;height:25px;border:none;color:#111010;font-weight:bold;line-height:25px;text-align:center;display:block;text-decoration:none;cursor:pointer" onclick="TX.PopLayer.CloseLayer(\'pubLayer_Msg\')">知道了</a></p></dd></dl></div>'; return TX.PopLayer.ShowLayer({ Title: "公告", LayerWidth: "550px", LayerHeight: "275px", bgAlpha: "0.5", sHtml: a }), !1 }, TX.Reversal = function (a) { var b = ""; for (i = 0; i < a.length - 1; i++) b = a.charAt(i) + b; return b }, TX.ValidatePassword = function (a) { var b, c, d, e, f, g, h; if (a.length < 6) return !0; if (b = "01234567890", b.indexOf(a) > -1 || TX.Reversal(b).indexOf(a) > -1) return !0; if (c = "abcdefghijklmnopqrstuvwxyz", c.indexOf(a) > -1 || TX.Reversal(c).indexOf(a) > -1) return !0; if (d = "ABCDEFGHIJKLMNOPQRSTUVWZYZ", d.indexOf(a) > -1 || TX.Reversal(d).indexOf(a) > -1) return !0; if (e = "qwertyuiop[]\\asdfghjkl;'zxcvbnm,./", e.indexOf(a) > -1 || TX.Reversal(e).indexOf(a) > -1) return !0; for (f = "", g = !0, h = 0; h < a.length - 1; h++) if (0 == h) f = a.charAt(h); else if (f != a.charAt(h)) { g = !1; break } return g }, TX.ShowPsdMsg = function () { var a = '<div style="width:398px;height:270px;background:url(http://r.itiexue.net/global/images/bj.jpg) no-repeat;"><p style="text-align:center;padding-top:205px"><a href="http://i.tiexue.net/modpassword.aspx" target="_blank"><img  src="http://r.itiexue.net/global/images/btn-1.jpg" /></a>&nbsp;&nbsp;<input type="image" src="http://r.itiexue.net/global/images/btn-2.jpg" onclick="TX.PopLayer.CloseLayer()" /></p></div>'; TX.PopLayer.ShowLayer({ Title: "提示", LayerWidth: "398px", LayerHeight: "300px", bgAlpha: "0.5", sHtml: a }) }, TX.CheckPsd = function (a, b) { this.ValidatePassword(b) ? this.ShowPsdMsg() : a == b && this.ShowPsdMsg() }, TX.EnterSubmit = function (a, b) { return e = a ? a : window.event ? window.event : null, 13 == e.keyCode ? b() : void 0 }, TX.QuickRegister = function (a, b, c, d, e, f, g, h, i, j) { TX.QuickRegisterInfoCheck(a, b, c, d, e); var k = null; void 0 == d && (d = ""), void 0 == f && (f = 1), void 0 == g && (g = 1), void 0 == h && (h = ""), void 0 == i && (i = ""), void 0 == j && (j = ""), k = TX.Config.QuickRegister + "?userName=" + escape(a) + "&passWord=" + escape(encodeURIComponent(b)) + "&renewPwd=" + escape(encodeURIComponent(c)) + "&gender=" + f + "&identityType=" + g + "&realName=" + escape(h) + "&identityNumber=" + j + "&email=" + d + "&Mobile=" + i + "&validateNum=" + escape(e), $("body").append("<script id='TxQuickRegisterJs' src='" + k + "'></script>") }, TX.QuickRegisterInfoCheck = function (a, b, c, d, e) { if (TX.LibraryTool.StringIsNullOrEmpty(a)) return alert("请输入用户名"), !1; var f = TX.LibraryTool.StringLength(a); return 2 > f || f > 16 ? (alert("输入用户名请少于16个字符，大于两个字符"), !1) : TX.LibraryTool.StringIsNullOrEmpty(b) ? (alert("密码不能为空"), !1) : b.length >= 6 && b.length <= 16 ? b != c ? (alert("两次输入的密码不正确，请重新填写"), !1) : TX.LibraryTool.StringIsNullOrEmpty(d) || TX.LibraryTool.StringIsEmail(d) ? TX.LibraryTool.StringIsNullOrEmpty(e) ? (alert("请输入验证码"), !1) : void 0 : (alert("邮箱格式不正确"), !1) : (alert("密码长度必须在6-16个字符之间"), !1) }, TX.Log_MD5 = function (a) { function b(a) { var b = (a >>> 0).toString(16); return "00000000".substr(0, 8 - b.length) + b } function c(a) { var c, b = []; for (c = 0; c < a.length; c++) b = b.concat(k(a[c])); return b } function d(a) { var c, b = []; for (c = 0; 8 > c; c++) b.push(255 & a), a >>>= 8; return b } function e(a, b) { return 4294967295 & a << b | a >>> 32 - b } function f(a, b, c) { return a & b | ~a & c } function g(a, b, c) { return c & a | ~c & b } function h(a, b, c) { return a ^ b ^ c } function i(a, b, c) { return b ^ (a | ~c) } function j(a, b) { return a[b + 3] << 24 | a[b + 2] << 16 | a[b + 1] << 8 | a[b] } function k(a) { var c, d, e, b = []; for (c = 0; c < a.length; c++) if (a.charCodeAt(c) <= 127) b.push(a.charCodeAt(c)); else for (d = encodeURIComponent(a.charAt(c)).substr(1).split("%"), e = 0; e < d.length; e++) b.push(parseInt(d[e], 16)); return b } function l() { var i, f = "", g = 0, h = 0; for (i = 3; i >= 0; i--) h = arguments[i], g = 255 & h, h >>>= 8, g <<= 8, g |= 255 & h, h >>>= 8, g <<= 8, g |= 255 & h, h >>>= 8, g <<= 8, g |= h, f += b(g); return f } function m(a) { var c, b = new Array(a.length); for (c = 0; c < a.length; c++) b[c] = a[c]; return b } function p(a, b) { return 4294967295 & a + b } function q() { function a(a, b, c, d) { var f = v; v = u, u = t, t = p(t, e(p(s, p(a, p(b, c))), d)), s = f } var c, k, m, o, q, r, s, t, u, v, w, b = n.length; if (n.push(128), c = n.length % 64, c > 56) { for (k = 0; 64 - c > k; k++) n.push(0); c = n.length % 64 } for (k = 0; 56 - c > k; k++) n.push(0); for (n = n.concat(d(8 * b)), m = 1732584193, o = 4023233417, q = 2562383102, r = 271733878, s = 0, t = 0, u = 0, v = 0, k = 0; k < n.length / 64; k++) s = m, t = o, u = q, v = r, w = 64 * k, a(f(t, u, v), 3614090360, j(n, w), 7), a(f(t, u, v), 3905402710, j(n, w + 4), 12), a(f(t, u, v), 606105819, j(n, w + 8), 17), a(f(t, u, v), 3250441966, j(n, w + 12), 22), a(f(t, u, v), 4118548399, j(n, w + 16), 7), a(f(t, u, v), 1200080426, j(n, w + 20), 12), a(f(t, u, v), 2821735955, j(n, w + 24), 17), a(f(t, u, v), 4249261313, j(n, w + 28), 22), a(f(t, u, v), 1770035416, j(n, w + 32), 7), a(f(t, u, v), 2336552879, j(n, w + 36), 12), a(f(t, u, v), 4294925233, j(n, w + 40), 17), a(f(t, u, v), 2304563134, j(n, w + 44), 22), a(f(t, u, v), 1804603682, j(n, w + 48), 7), a(f(t, u, v), 4254626195, j(n, w + 52), 12), a(f(t, u, v), 2792965006, j(n, w + 56), 17), a(f(t, u, v), 1236535329, j(n, w + 60), 22), a(g(t, u, v), 4129170786, j(n, w + 4), 5), a(g(t, u, v), 3225465664, j(n, w + 24), 9), a(g(t, u, v), 643717713, j(n, w + 44), 14), a(g(t, u, v), 3921069994, j(n, w), 20), a(g(t, u, v), 3593408605, j(n, w + 20), 5), a(g(t, u, v), 38016083, j(n, w + 40), 9), a(g(t, u, v), 3634488961, j(n, w + 60), 14), a(g(t, u, v), 3889429448, j(n, w + 16), 20), a(g(t, u, v), 568446438, j(n, w + 36), 5), a(g(t, u, v), 3275163606, j(n, w + 56), 9), a(g(t, u, v), 4107603335, j(n, w + 12), 14), a(g(t, u, v), 1163531501, j(n, w + 32), 20), a(g(t, u, v), 2850285829, j(n, w + 52), 5), a(g(t, u, v), 4243563512, j(n, w + 8), 9), a(g(t, u, v), 1735328473, j(n, w + 28), 14), a(g(t, u, v), 2368359562, j(n, w + 48), 20), a(h(t, u, v), 4294588738, j(n, w + 20), 4), a(h(t, u, v), 2272392833, j(n, w + 32), 11), a(h(t, u, v), 1839030562, j(n, w + 44), 16), a(h(t, u, v), 4259657740, j(n, w + 56), 23), a(h(t, u, v), 2763975236, j(n, w + 4), 4), a(h(t, u, v), 1272893353, j(n, w + 16), 11), a(h(t, u, v), 4139469664, j(n, w + 28), 16), a(h(t, u, v), 3200236656, j(n, w + 40), 23), a(h(t, u, v), 681279174, j(n, w + 52), 4), a(h(t, u, v), 3936430074, j(n, w), 11), a(h(t, u, v), 3572445317, j(n, w + 12), 16), a(h(t, u, v), 76029189, j(n, w + 24), 23), a(h(t, u, v), 3654602809, j(n, w + 36), 4), a(h(t, u, v), 3873151461, j(n, w + 48), 11), a(h(t, u, v), 530742520, j(n, w + 60), 16), a(h(t, u, v), 3299628645, j(n, w + 8), 23), a(i(t, u, v), 4096336452, j(n, w), 6), a(i(t, u, v), 1126891415, j(n, w + 28), 10), a(i(t, u, v), 2878612391, j(n, w + 56), 15), a(i(t, u, v), 4237533241, j(n, w + 20), 21), a(i(t, u, v), 1700485571, j(n, w + 48), 6), a(i(t, u, v), 2399980690, j(n, w + 12), 10), a(i(t, u, v), 4293915773, j(n, w + 40), 15), a(i(t, u, v), 2240044497, j(n, w + 4), 21), a(i(t, u, v), 1873313359, j(n, w + 32), 6), a(i(t, u, v), 4264355552, j(n, w + 60), 10), a(i(t, u, v), 2734768916, j(n, w + 24), 15), a(i(t, u, v), 1309151649, j(n, w + 52), 21), a(i(t, u, v), 4149444226, j(n, w + 16), 6), a(i(t, u, v), 3174756917, j(n, w + 44), 10), a(i(t, u, v), 718787259, j(n, w + 8), 15), a(i(t, u, v), 3951481745, j(n, w + 36), 21), m = p(m, s), o = p(o, t), q = p(q, u), r = p(r, v); return l(r, q, o, m).toUpperCase() } var n = null, o = null; return "string" == typeof a ? n = k(a) : a.constructor == Array ? 0 === a.length ? n = a : "string" == typeof a[0] ? n = c(a) : "number" == typeof a[0] ? n = a : o = typeof a[0] : "undefined" != typeof ArrayBuffer ? a instanceof ArrayBuffer ? n = m(new Uint8Array(a)) : a instanceof Uint8Array || a instanceof Int8Array ? n = m(a) : a instanceof Uint32Array || a instanceof Int32Array || a instanceof Uint16Array || a instanceof Int16Array || a instanceof Float32Array || a instanceof Float64Array ? n = m(new Uint8Array(a.buffer)) : o = typeof a : o = typeof a, o && alert("MD5 type mismatch, cannot process " + o), q() }, TX.Log_GetRefer = function () { var c, d, a = document.referrer; if (a) a.indexOf("?") > -1 && (a = a.split("?")[0]); else if (/MSIE (\d+\.\d+);/.test(navigator.userAgent) || /MSIE(\d+\.\d+);/.test(navigator.userAgent)) try { window.opener && (a = window.opener.location.href) } catch (b) { } return a = a.toLowerCase(), c = new RegExp("(http|https)://([0-9a-z_-]+\\.)?[0-9a-z_-]+(\\.[0-9a-z]{2,6}){1,2}", "ig"), c.test(a) && (d = a.match(c), d.length > 0) ? d[0].replace(/(http|https):\/\//, "") : a }, TX.Log_MainID = function (a) { var b; return /_(\d+)_/.test(a) ? (b = parseInt(a.replace(/.*_(\d+)_.*/gi, "$1")), isNaN(b) ? 0 : b) : /[a-zA-Z]+(\d+)\.htm/.test(a) ? (b = parseInt(a.replace(/.*[a-zA-Z]+(\d+)\.htm.*/gi, "$1")), isNaN(b) ? 0 : b) : 0 }, TX.Log_Common = function (a, b, c, d, e, f, g) { g ? $.get("http://log.tiexue.net/loger.aspx", { v: a, b: b, t: c, r: f, ct: d, d: e, m: g }, function () { }, "jsonp") : $.get("http://log.tiexue.net/loger.aspx", { v: a, b: b, t: c, r: f, ct: d, d: e }, function () { }, "jsonp") }, TX.Log_GetCookie = function (a) { return document.cookie.length > 0 && (c_start = document.cookie.indexOf(a + "="), -1 != c_start) ? (c_start = c_start + a.length + 1, c_end = document.cookie.indexOf(";", c_start), -1 == c_end && (c_end = document.cookie.length), unescape(document.cookie.substring(c_start, c_end))) : "" }, TX.Log_GetRootDomain = function (a) { var b = a.split("."); return b.length > 2 ? b[b.length - 2] + "." + b[b.length - 1] : a }, TX.Log_CookieCheck = function (a, b, c) { var f, g, d = TX.Log_GetCookie("_logck"), e = TX.Log_MD5(b + c); return d == e ? !0 : (f = new Date, f.setMinutes(f.getMinutes() + 30), g = TX.Log_GetRootDomain(a), document.cookie = "_logck=" + escape(e) + ";expires=" + f.toGMTString() + ";domain=" + g + ";path=/;", !1) }, TX.Log_View = function (a) { var b, c, d; if (a.page) { if (b = self.location.href.toLowerCase(), c = self.location.host.toLowerCase(), d = TX.Log_GetRefer(), TX.Log_CookieCheck(c, b, d)) return; if (a.tid) return TX.Log_Common(a.tid, "view", a.page, "", c, d), void 0; TX.Log_Common(0, "view", a.page, "", c, d) } }, TX.Log_AdClick = function (a, b) { var c, d, e, f; try { if (!b || "" == b) return; if (b = b.toLowerCase(), c = self.location.href.toLowerCase().split("?")[0], d = self.location.host.toLowerCase(), e = TX.Log_GetRefer(), TX.Log_CookieCheck(d, c, a + b)) return; if (b && a) return f = parseInt(a), isNaN(f) && (f = 0), TX.Log_Common(f, "click", b, "", d, e), void 0; b && TX.Log_Common(0, "click", b, "", d, e) } catch (g) { } } } (window), $(function () { document.location.href.indexOf(".tiexue.net") > -1 || document.location.href.indexOf(".pengfu.com") > -1 || Tx_WriteSingleLogin() });
/*tx-readname*/

    ;
    tx.ShowLayer({ Title: "", LayerWidth: "760px", LayerHeight: "460px", bgAlpha: '0.2', sIframe: url })
    
